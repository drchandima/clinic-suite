{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Education/WebDev%20with%20AI/Projects/clinic-suite/app/login/page.js"],"sourcesContent":["// app/login/page.js\r\n'use client';\r\n\r\nimport { useAuth } from '../../components/AuthProvider';\r\nimport { useEffect, useState } from 'react';\r\nimport { signInWithEmailAndPassword } from 'firebase/auth';\r\nimport { auth } from '../../lib/firebase';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n  const { user, claims, loading } = useAuth();\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState(null);\r\n\r\n  // ------------------------------\r\n  // Auto-redirect after login\r\n  // ------------------------------\r\n  useEffect(() => {\r\n    if (loading) return;\r\n    if (!user || !claims) return;\r\n\r\n    if (claims.role === 'doctor') {\r\n      router.replace('/consultation');\r\n    } else if (claims.role === 'receptionist') {\r\n      router.replace('/patients');\r\n    } else {\r\n      router.replace('/'); // default/fallback\r\n    }\r\n  }, [user, claims, loading, router]);\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n    setError(null);\r\n    try {\r\n      await signInWithEmailAndPassword(auth, email, password);\r\n      // Redirect handled automatically by the useEffect above\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(err.message || 'Login failed');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-slate-100\">\r\n      <div className=\"bg-white p-6 rounded-xl shadow-lg w-full max-w-md\">\r\n        <h1 className=\"text-xl font-semibold text-center\">Login</h1>\r\n\r\n        {error && (\r\n          <div className=\"mt-3 p-2 text-sm bg-red-50 border border-red-200 rounded text-red-700\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} className=\"mt-4 space-y-4\">\r\n          <input\r\n            type=\"email\"\r\n            className=\"w-full border p-2 rounded\"\r\n            placeholder=\"Email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            required\r\n          />\r\n\r\n          <input\r\n            type=\"password\"\r\n            className=\"w-full border p-2 rounded\"\r\n            placeholder=\"Password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            required\r\n          />\r\n\r\n          <button\r\n            type=\"submit\"\r\n            className=\"w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700\"\r\n          >\r\n            Sign in\r\n          </button>\r\n        </form>\r\n\r\n        <p className=\"text-center text-sm text-slate-500 mt-4\">\r\n          Don't have an account?{' '}\r\n          <a className=\"text-indigo-600\" href=\"/signup\">\r\n            Sign up\r\n          </a>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,oBAAoB;;;;;;AAGpB;AACA;AACA;AAAA;AACA;AACA;AANA;;;;;;;AAQe,SAAS;IACtB,MAAM,SAAS,IAAA,kKAAS;IACxB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,wJAAO;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,oOAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,oOAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,oOAAQ,EAAC;IAEnC,iCAAiC;IACjC,4BAA4B;IAC5B,iCAAiC;IACjC,IAAA,qOAAS,EAAC;QACR,IAAI,SAAS;QACb,IAAI,CAAC,QAAQ,CAAC,QAAQ;QAEtB,IAAI,OAAO,IAAI,KAAK,UAAU;YAC5B,OAAO,OAAO,CAAC;QACjB,OAAO,IAAI,OAAO,IAAI,KAAK,gBAAgB;YACzC,OAAO,OAAO,CAAC;QACjB,OAAO;YACL,OAAO,OAAO,CAAC,MAAM,mBAAmB;QAC1C;IACF,GAAG;QAAC;QAAM;QAAQ;QAAS;KAAO;IAElC,eAAe,aAAa,CAAC;QAC3B,EAAE,cAAc;QAChB,SAAS;QACT,IAAI;YACF,MAAM,IAAA,+OAA0B,EAAC,0IAAI,EAAE,OAAO;QAC9C,wDAAwD;QAC1D,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;YACd,SAAS,IAAI,OAAO,IAAI;QAC1B;IACF;IAEA,qBACE,iQAAC;QAAI,WAAU;kBACb,cAAA,iQAAC;YAAI,WAAU;;8BACb,iQAAC;oBAAG,WAAU;8BAAoC;;;;;;gBAEjD,uBACC,iQAAC;oBAAI,WAAU;8BACZ;;;;;;8BAIL,iQAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACtC,iQAAC;4BACC,MAAK;4BACL,WAAU;4BACV,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4BACxC,QAAQ;;;;;;sCAGV,iQAAC;4BACC,MAAK;4BACL,WAAU;4BACV,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4BAC3C,QAAQ;;;;;;sCAGV,iQAAC;4BACC,MAAK;4BACL,WAAU;sCACX;;;;;;;;;;;;8BAKH,iQAAC;oBAAE,WAAU;;wBAA0C;wBAC9B;sCACvB,iQAAC;4BAAE,WAAU;4BAAkB,MAAK;sCAAU;;;;;;;;;;;;;;;;;;;;;;;AAOxD"}}]
}