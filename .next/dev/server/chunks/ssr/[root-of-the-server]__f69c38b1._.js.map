{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///D:/Education/WebDev%20with%20AI/Projects/clinic-suite/lib/firebase.js"],"sourcesContent":["// lib/firebase.js (DEBUG VERSION)\n// Overwrite your existing file with this while debugging.\n// After debugging you may revert to the normal version (no window exposure).\n\nimport { initializeApp, getApps } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getStorage } from \"firebase/storage\";\n\nconst clientConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY || null,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN || null,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID || null,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET || null,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID || null,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID || null\n};\n\nlet firebaseApp;\nif (!getApps().length) {\n  try {\n    firebaseApp = initializeApp(clientConfig);\n    // eslint-disable-next-line no-empty\n  } catch (err) {\n    console.error('Firebase initializeApp error (likely invalid config):', err);\n    // still expose partial config for debugging\n    firebaseApp = null;\n  }\n} else {\n  firebaseApp = getApps()[0];\n}\n\nexport const auth = firebaseApp ? getAuth(firebaseApp) : null;\nexport const db = firebaseApp ? getFirestore(firebaseApp) : null;\nexport const storage = firebaseApp ? getStorage(firebaseApp) : null;\n\n// DEBUG: expose runtime info for browser console inspection\nif (typeof window !== 'undefined') {\n  window.__CLINIC_DEBUG__ = window.__CLINIC_DEBUG__ || {};\n  window.__CLINIC_DEBUG__.firebaseClientConfig = clientConfig;\n  window.__CLINIC_DEBUG__.firebaseApp = firebaseApp;\n  window.__CLINIC_DEBUG__.auth = auth;\n  window.__CLINIC_DEBUG__.db = db;\n  window.__CLINIC_DEBUG__.storage = storage;\n  console.debug('FIREBASE DEBUG: exported to window.__CLINIC_DEBUG__');\n  console.debug('FIREBASE CONFIG:', clientConfig);\n}\n"],"names":[],"mappings":"AAAA,kCAAkC;AAClC,0DAA0D;AAC1D,6EAA6E;;;;;;;;;AAE7E;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,MAAM,eAAe;IACnB,QAAQ,+EAA4C;IACpD,YAAY,6EAAgD;IAC5D,WAAW,6DAA+C;IAC1D,eAAe,iFAAmD;IAClE,mBAAmB,oDAAwD;IAC3E,OAAO,iFAA2C;AACpD;AAEA,IAAI;AACJ,IAAI,CAAC,IAAA,8LAAO,IAAG,MAAM,EAAE;IACrB,IAAI;QACF,cAAc,IAAA,oMAAa,EAAC;IAC5B,oCAAoC;IACtC,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,yDAAyD;QACvE,4CAA4C;QAC5C,cAAc;IAChB;AACF,OAAO;IACL,cAAc,IAAA,8LAAO,GAAE,CAAC,EAAE;AAC5B;AAEO,MAAM,OAAO,cAAc,IAAA,4NAAO,EAAC,eAAe;AAClD,MAAM,KAAK,cAAc,IAAA,oMAAY,EAAC,eAAe;AACrD,MAAM,UAAU,cAAc,IAAA,qNAAU,EAAC,eAAe;AAE/D,4DAA4D;AAC5D"}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///D:/Education/WebDev%20with%20AI/Projects/clinic-suite/components/AuthProvider.js"],"sourcesContent":["// components/AuthProvider.js\r\n'use client';\r\n\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport { onAuthStateChanged, getIdTokenResult } from 'firebase/auth';\r\nimport { auth, db } from '../lib/firebase';\r\nimport { doc, getDoc } from 'firebase/firestore';\r\n\r\nconst AuthContext = createContext({ user: null, claims: null, loading: true });\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [user, setUser] = useState(null);\r\n  const [claims, setClaims] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const unsub = onAuthStateChanged(auth, async (u) => {\r\n      if (!u) {\r\n        setUser(null);\r\n        setClaims(null);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      setUser(u);\r\n      setLoading(true);\r\n\r\n      let tokenClaims = null;\r\n      try {\r\n        const idTokenResult = await getIdTokenResult(u, /* forceRefresh= */ false);\r\n        tokenClaims = idTokenResult.claims || null;\r\n      } catch (err) {\r\n        console.error('getIdTokenResult failed', err);\r\n        tokenClaims = null;\r\n      }\r\n\r\n      // If no clinicId on token, try reading users/{uid} as fallback\r\n      if (!tokenClaims?.clinicId) {\r\n        try {\r\n          const uRef = doc(db, 'users', u.uid);\r\n          const snap = await getDoc(uRef);\r\n          if (snap.exists()) {\r\n            const d = snap.data();\r\n            tokenClaims = {\r\n              ...tokenClaims,\r\n              clinicId: tokenClaims?.clinicId ?? d.clinicId ?? null,\r\n              role: tokenClaims?.role ?? d.role ?? null\r\n            };\r\n            console.debug('AuthProvider: fallback claims from users/{uid}', d);\r\n          }\r\n        } catch (err) {\r\n          console.error('Failed to fetch users/{uid} fallback', err);\r\n        }\r\n      }\r\n\r\n      setClaims(tokenClaims);\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsub();\r\n  }, []);\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, claims, loading }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext);\r\n}\r\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;;;;AAG7B;AACA;AAAA;AACA;AACA;AAAA;AALA;;;;;;AAOA,MAAM,4BAAc,IAAA,yOAAa,EAAC;IAAE,MAAM;IAAM,QAAQ;IAAM,SAAS;AAAK;AAErE,SAAS,aAAa,EAAE,QAAQ,EAAE;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,oOAAQ,EAAC;IACjC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,oOAAQ,EAAC;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,oOAAQ,EAAC;IAEvC,IAAA,qOAAS,EAAC;QACR,MAAM,QAAQ,IAAA,uOAAkB,EAAC,0IAAI,EAAE,OAAO;YAC5C,IAAI,CAAC,GAAG;gBACN,QAAQ;gBACR,UAAU;gBACV,WAAW;gBACX;YACF;YACA,QAAQ;YACR,WAAW;YAEX,IAAI,cAAc;YAClB,IAAI;gBACF,MAAM,gBAAgB,MAAM,IAAA,qOAAgB,EAAC,GAAG,iBAAiB,GAAG;gBACpE,cAAc,cAAc,MAAM,IAAI;YACxC,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,2BAA2B;gBACzC,cAAc;YAChB;YAEA,+DAA+D;YAC/D,IAAI,CAAC,aAAa,UAAU;gBAC1B,IAAI;oBACF,MAAM,OAAO,IAAA,2LAAG,EAAC,wIAAE,EAAE,SAAS,EAAE,GAAG;oBACnC,MAAM,OAAO,MAAM,IAAA,8LAAM,EAAC;oBAC1B,IAAI,KAAK,MAAM,IAAI;wBACjB,MAAM,IAAI,KAAK,IAAI;wBACnB,cAAc;4BACZ,GAAG,WAAW;4BACd,UAAU,aAAa,YAAY,EAAE,QAAQ,IAAI;4BACjD,MAAM,aAAa,QAAQ,EAAE,IAAI,IAAI;wBACvC;wBACA,QAAQ,KAAK,CAAC,kDAAkD;oBAClE;gBACF,EAAE,OAAO,KAAK;oBACZ,QAAQ,KAAK,CAAC,wCAAwC;gBACxD;YACF;YAEA,UAAU;YACV,WAAW;QACb;QAEA,OAAO,IAAM;IACf,GAAG,EAAE;IAEL,qBACE,iQAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAQ;QAAQ;kBAClD;;;;;;AAGP;AAEO,SAAS;IACd,OAAO,IAAA,sOAAU,EAAC;AACpB"}},
    {"offset": {"line": 244, "column": 0}, "map": {"version":3,"sources":["file:///D:/Education/WebDev%20with%20AI/Projects/clinic-suite/components/Navbar.js"],"sourcesContent":["'use client';\nimport Link from 'next/link';\nimport { useAuth } from '../context/AuthContext';\n\nexport default function Navbar() {\n  const { user, claims } = useAuth();\n\n  const role = claims?.role ?? null;\n\n  return (\n    <nav className=\"w-full bg-blue-600 text-white p-4 shadow-md\">\n      <div className=\"max-w-6xl mx-auto flex items-center justify-between\">\n\n        {/* Left Navigation */}\n        <div className=\"flex gap-6 text-lg font-medium\">\n\n          {/* Home - visible to all */}\n          <Link href=\"/\" className=\"hover:text-gray-200\">\n            Home\n          </Link>\n\n          {/* Patients - receptionist or admin */}\n          {(role === 'receptionist' || role === 'admin') && (\n            <Link href=\"/patients\" className=\"hover:text-gray-200\">\n              Patients\n            </Link>\n          )}\n\n          {/* Consultation - doctor or admin */}\n          {(role === 'doctor' || role === 'admin') && (\n            <Link href=\"/consultation\" className=\"hover:text-gray-200\">\n              Consultation\n            </Link>\n          )}\n\n          {/* Pharmacy - pharmacist or admin */}\n          {(role === 'pharmacist' || role === 'admin') && (\n            <Link href=\"/pharmacy\" className=\"hover:text-gray-200\">\n              Pharmacy\n            </Link>\n          )}\n\n        </div>\n\n        {/* Right side: user info */}\n        <div className=\"text-sm opacity-80\">\n          {user?.email ? (\n            <span>{user.email}</span>\n          ) : (\n            <span>Not logged in</span>\n          )}\n        </div>\n      </div>\n    </nav>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;;;;;;AADA;;;;AAIe,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG;IAEzB,MAAM,OAAO,QAAQ,QAAQ;IAE7B,qBACE,iQAAC;QAAI,WAAU;kBACb,cAAA,iQAAC;YAAI,WAAU;;8BAGb,iQAAC;oBAAI,WAAU;;sCAGb,iQAAC,0LAAI;4BAAC,MAAK;4BAAI,WAAU;sCAAsB;;;;;;wBAK9C,CAAC,SAAS,kBAAkB,SAAS,OAAO,mBAC3C,iQAAC,0LAAI;4BAAC,MAAK;4BAAY,WAAU;sCAAsB;;;;;;wBAMxD,CAAC,SAAS,YAAY,SAAS,OAAO,mBACrC,iQAAC,0LAAI;4BAAC,MAAK;4BAAgB,WAAU;sCAAsB;;;;;;wBAM5D,CAAC,SAAS,gBAAgB,SAAS,OAAO,mBACzC,iQAAC,0LAAI;4BAAC,MAAK;4BAAY,WAAU;sCAAsB;;;;;;;;;;;;8BAQ3D,iQAAC;oBAAI,WAAU;8BACZ,MAAM,sBACL,iQAAC;kCAAM,KAAK,KAAK;;;;;6CAEjB,iQAAC;kCAAK;;;;;;;;;;;;;;;;;;;;;;AAMlB"}}]
}